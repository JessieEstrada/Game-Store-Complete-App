<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login form</title>
    <link rel="stylesheet" type="text/css" href="/AdminLogin/Adminstyle.css">
</head>
<body>
<div class="container">
    <div class="video">
        <video class="bg-video__content" autoplay muted loop>
            <source src="https://drive.google.com/uc?export=download&id=1L26SBT8-5qFtxsJt3-TKsGESHk-hwLnB" type="video/mp4" />
            <source src="https://drive.google.com/uc?export=download&id=1pbEEe0CcHtcy4wZ8B-5J8AFGP30kDhWz" type="video/webm" />
            Your browser is not supported for this videos!sorryðŸ˜¥
        </video>
    </div>
    <div class="login-section">
        <div class="form-box">
            <h2>Admin Login</h2>
            <!-- Display the error message if it exists -->
            <p id="error" style="color: red"></p>

            <!-- We are going to forward this js object of user and password to the Post request of /authenticate -->
            <form id="loginForm" action="/authenticate" method="POST">
                <div class="input-box">
                    <input type="text" id="username" name="username" required>
                    <label for="username">User</label>
                </div>

                <div class="input-box">
                    <input type="password" id="password" name="password" required>
                    <label for="">Password</label>
                </div>
                <div class="button-wrapper">
                    <input type="submit" class="btn" value="Login">
                </div>
            </form>
            <div class="group-section">
                <a href="/">Return to Game Store</a>
            </div>
        </div>
    </div>
</div>

<script>

    // document.getElementById('loginForm').addEventListener('submit', function(event) {
    //     event.preventDefault(); // prevent the form from submitting normally
    //
    //     var username = document.getElementById('username').value;
    //     var password = document.getElementById('password').value;
    //
    //     fetch('/authenticate', {
    //         method: 'POST',
    //         headers: {
    //             'Content-Type': 'application/json'
    //         },
    //         body: JSON.stringify({
    //             username: username,
    //             password: password
    //         })
    //     })
    //         .then(response => {
    //             if (!response.ok) {
    //                 throw new Error('Invalid username or password');
    //             }
    //             return response.json();
    //         })
    //         .then(data => {
    //             // store the token in localStorage
    //             localStorage.setItem('token', data.token);
    //             console.log('token stored', data.tokendata.token)
    //
    //             // redirect the user to the admin dashboard
    //             window.location.href = '/admin/dashboard';
    //         })
    //         .catch(error => {
    //             console.error('Error:', error);
    //             document.getElementById('error').innerText = 'Invalid username or password';
    //         });
    // });
    //
    // // Add event listener to window onload to fetch admin dashboard content once the user is redirected after login
    // window.onload = function() {
    //     if (window.location.pathname === '/admin/dashboard') {
    //         fetch('/admin/dashboard', {
    //             method: 'GET',
    //             headers: {
    //                 'Authorization': `Bearer ${localStorage.getItem('token')}`
    //             }
    //         })
    //             .then(response => {
    //                 if (!response.ok) {
    //                     throw new Error('Unauthorized');
    //                 }
    //                 return response.json();
    //             })
    //             .then(data => {
    //                 // Handle data from server...
    //             })
    //             .catch(error => {
    //                 console.error('Error:', error);
    //                 if (error.message === 'Unauthorized') {
    //                     window.location.href = '/login';
    //                 }
    //             });
    //     }
    // }
</script>

</body>
</html>
